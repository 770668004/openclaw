# 智能技能匹配规则

## 匹配优先级

1. **精确匹配** - 命令中明确提到技能名称或功能
2. **语义匹配** - 命令意图与技能描述高度相关
3. **上下文匹配** - 基于对话历史和用户偏好
4. **组合匹配** - 多个技能协同工作

## 技能分类映射

### 文件操作类
- **backup**: 备份、恢复、快照、存储
- **file-maintenance**: 文件整理、清理、重命名、格式转换
- **find**: 文件查找、内容搜索、位置定位

### 开发工具类
- **github**: GitHub操作、PR管理、issue处理
- **github-upgraded**: 高级GitHub功能、代码审查、CI监控
- **gh-issues**: 自动化issue修复、PR创建

### 系统管理类
- **healthcheck**: 安全审计、系统加固、风险评估
- **healthcheck-upgraded**: 高级安全功能、漏洞扫描

### 通信协作类
- **sonoscli**: Sonos音箱控制、音乐播放
- **weather**: 天气查询、温度预报

### 记忆管理类
- **multi-memory-manager**: 记忆系统管理、数据持久化
- **skill-evolution-manager**: 技能进化、自动升级

### 工具辅助类
- **concise-output**: 简洁输出、格式优化
- **vercel-react-best-practices**: React/Next.js性能优化

## 匹配算法

### 关键词权重
- 动词权重: 0.4 (主要动作)
- 名词权重: 0.3 (操作对象)
- 形容词权重: 0.2 (质量要求)
- 上下文权重: 0.1 (历史偏好)

### 相似度计算
使用余弦相似度计算命令与技能描述的匹配度：
```
similarity = (A·B) / (|A| × |B|)
```

### 阈值设定
- 高匹配度: ≥ 0.8 (直接使用)
- 中匹配度: 0.5-0.8 (询问确认)
- 低匹配度: < 0.5 (不使用或建议其他方案)

## 多技能组合策略

### 顺序执行
当任务需要多个步骤时，按依赖关系排序执行

### 并行执行
当任务可以并行处理时，同时调用多个技能

### 条件执行
根据中间结果决定是否调用后续技能

## 示例匹配场景

### 场景1: "帮我备份重要文件到云端"
- 匹配技能: backup (权重: 0.95)
- 理由: 明确提到"备份"和"云端"

### 场景2: "检查我的系统安全"
- 匹配技能: healthcheck (权重: 0.90)
- 理由: "安全"是healthcheck的核心功能

### 场景3: "找一下上周的会议记录"
- 匹配技能: find (权重: 0.85)
- 理由: "找"对应find技能的搜索功能

### 场景4: "优化我的React应用性能"
- 匹配技能: vercel-react-best-practices (权重: 0.92)
- 理由: 明确提到"React"和"性能优化"

### 场景5: "整理我的工作文件夹"
- 匹配技能: file-maintenance (权重: 0.88)
- 理由: "整理"对应文件维护功能

## 特殊处理规则

### 模糊命令
当命令不够明确时，优先询问用户澄清意图

### 冲突匹配
当多个技能匹配度相近时，提供选择让用户决定

### 新技能发现
当现有技能无法满足需求时，建议创建新技能或使用基础工具

### 用户偏好学习
记录用户的历史选择，优化未来的匹配结果