---
name: intelligent-skill-matcher
description: 智能分析用户命令文本，自动匹配和调用最适合的现有技能来高效执行任务。使用自然语言理解技术分析用户意图，从可用技能库中选择最佳匹配，并协调多个技能的组合使用以完成复杂任务。
---

# 智能技能匹配器 (Intelligent Skill Matcher)

## 功能概述

这个技能能够：
- 自动分析用户输入的自然语言命令
- 理解用户的真实意图和需求
- 从现有的技能库中智能匹配最合适的技能
- 协调多个技能的组合使用来完成复杂任务
- 提供更快、更高效的任务执行体验

## 使用场景

当用户发出任何命令时，此技能会自动激活并分析：
- 命令的语义和上下文
- 可用技能的功能范围
- 任务的复杂度和所需资源
- 最优的执行路径

## 工作流程

### 1. 命令分析阶段
- 解析用户输入的自然语言
- 提取关键意图、实体和参数
- 识别任务类型和复杂度

### 2. 技能匹配阶段
- 扫描所有可用技能的描述和功能
- 计算每个技能与当前任务的匹配度
- 选择最佳单个技能或技能组合

### 3. 执行协调阶段
- 调用选中的技能
- 处理技能间的依赖关系
- 监控执行过程并处理异常

### 4. 结果优化阶段
- 整合多个技能的输出
- 优化最终结果的格式和质量
- 提供执行反馈和改进建议

## 技能匹配策略

### 单一技能匹配
适用于简单、明确的任务：
- 天气查询 → weather技能
- GitHub操作 → github或github-upgraded技能
- 文件备份 → backup技能
- Sonos控制 → sonoscli技能

### 多技能组合
适用于复杂、多步骤的任务：
- "分析我的代码并修复bug" → github + gh-issues + github-upgraded
- "备份重要文件并发送通知" → backup + message
- "创建报告并分享到团队" → file-maintenance + message + github

## 实现细节

### 技能发现机制
```bash
# 列出所有可用技能
agents_list

# 获取技能详细信息
read ~/.openclaw/workspace/skills/<skill-name>/SKILL.md
```

### 智能匹配算法
1. **关键词匹配**：基于技能描述中的关键词
2. **语义相似度**：使用嵌入向量计算语义相似度
3. **上下文感知**：考虑对话历史和用户偏好
4. **性能评估**：优先选择经过验证的高效技能

### 执行优先级
- **安全第一**：始终优先考虑安全相关的技能（如healthcheck）
- **效率优先**：选择执行速度最快的合适技能
- **功能完整**：确保选择的技能能完整满足需求

## 使用示例

### 示例1：简单任务
**用户输入**："今天北京天气怎么样？"
**匹配技能**：weather
**执行**：自动调用weather技能获取北京天气

### 示例2：复杂任务
**用户输入**："帮我检查GitHub仓库中的bug并创建修复PR"
**匹配技能**：gh-issues + github-upgraded
**执行**：
1. 使用gh-issues获取bug列表
2. 使用github-upgraded分析代码并创建PR

### 示例3：多步骤任务
**用户输入**："备份我的工作文件，然后告诉我完成情况"
**匹配技能**：backup + message
**执行**：
1. 使用backup技能执行备份
2. 使用message技能发送完成通知

## 配置选项

### 匹配模式
- **自动模式**（默认）：完全自动匹配和执行
- **建议模式**：提供技能建议，等待用户确认
- **手动模式**：仅提供分析，由用户决定执行

### 性能优化
- **缓存机制**：缓存常用技能匹配结果
- **预加载**：预加载高频使用的技能
- **并行执行**：支持独立技能的并行执行

## 安全考虑

- **权限验证**：在执行敏感操作前验证权限
- **操作确认**：对破坏性操作要求用户确认
- **日志记录**：记录所有技能调用和执行结果
- **回滚机制**：支持关键操作的回滚

## 维护和更新

- **技能注册**：新技能自动注册到匹配系统
- **性能监控**：持续监控技能匹配准确率
- **用户反馈**：根据用户反馈优化匹配算法
- **版本管理**：支持技能版本的兼容性处理

## 故障排除

### 常见问题
1. **无匹配技能**：当没有合适的技能时，提供替代方案
2. **技能冲突**：当多个技能都适用时，选择最优解
3. **执行失败**：提供详细的错误信息和重试选项

### 调试命令
```bash
# 查看当前技能匹配状态
subagents list

# 手动触发技能匹配分析
sessions_spawn "分析以下命令的技能匹配: <command>"

# 查看技能匹配日志
read ~/.openclaw/workspace/memory/skill-matcher.log
```

## 最佳实践

1. **明确表达意图**：使用清晰、具体的语言描述需求
2. **提供上下文**：在复杂任务中提供必要的背景信息
3. **分步执行**：对于非常复杂的任务，考虑分步执行
4. **反馈改进**：及时提供匹配结果的反馈以优化系统

## 未来扩展

- **机器学习优化**：基于历史数据优化匹配算法
- **技能推荐**：主动推荐可能有用的新技能
- **跨平台集成**：支持更多外部工具和API
- **个性化匹配**：根据用户习惯定制匹配策略